"use strict";!function(){angular.module("angular.watchcount",["toastr"]).config(function(a){angular.extend(a,{allowHtml:!1,closeButton:!0,containerId:"toast-container",extendedTimeOut:0,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},messageClass:"toast-message",positionClass:"toast-top-right",tapToDismiss:!1,timeOut:0,titleClass:"toast-title",toastClass:"toast"})}).constant("watchCountConfig",{run:!1})}(),function(){function a(a,b){function c(a,b){if(a)switch(b){case"GOOD":d("success","$watch count = "+a,"Good Job!");break;case"BAD":d("warning","$watch count = "+a,"Watch out!!");break;case"WORSE":d("danger","$watch count = "+a,"**Danger**")}}function d(c,d,h){e(),a.cancel(g),g=a(function(){f.push(b[c](d,h))},500)}function e(){for(var a=f.length-1;a>=0;a--){var c=f.pop();b.clear(c)}}var f=[],g=null;return{showToastr:c}}angular.module("angular.watchcount").factory("watchCountService",a),a.$inject=["$timeout","toastr"]}(),function(){function a(a,b){function c(a){var b=0;return l.length=0,e(a,function(a){var c=d(a).length;l.push({id:a.$id,count:c}),b+=c}),b}function d(a){return a&&a.$$watchers?a.$$watchers:[]}function e(a,b){return a?(b(a),f(a,b)):void 0}function f(a,b){for(;a=h(a);)b(a),g(a,b)}function g(a,b){for(;a=i(a);)b(a),f(a,b)}function h(a){return!a.$$childHead||j(a)||j(a.$$childHead)?!1:a.$$childHead}function i(a){return!a.$$nextSibling||j(a)||j(a.$$nextSibling)?!1:a.$$nextSibling}function j(a){return a.toastClass?!0:!1}function k(a){this.Total=a,this.GetCategory=function(){return this.Total<2e3?"GOOD":this.Total<4e3?"BAD":"WORSE"}}var l=[];return{restrict:"E",replace:!1,scope:{},link:function(d,e){if(b.run){var f=d.$root,g=new k(0),h=function(){var b=c(f),d=new k(b);JSON.stringify(d)!==JSON.stringify(g)&&(g=d,console.log("TOTAL $watch count ::"+b),e[0].innerHTML="watchcount: "+b,a.showToastr(d.Total,d.GetCategory()))},i=!1;d.$watch(function(){i||(i=!0,d.$$postDigest(function(){i=!1,h()}))})}}}}angular.module("angular.watchcount").directive("watchCount",a),a.$inject=["watchCountService","watchCountConfig"]}();